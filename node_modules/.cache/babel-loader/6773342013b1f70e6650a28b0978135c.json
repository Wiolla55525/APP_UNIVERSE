{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/CodeAcademy/Desktop/My Projects/app-universe/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/CodeAcademy/Desktop/My Projects/app-universe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/CodeAcademy/Desktop/My Projects/app-universe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';export var useTemperature=function useTemperature(city){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),weather=_useState2[0],setWeather=_useState2[1];useEffect(function(){if(!city){return;}var myAbortController=new AbortController();_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var currentWeatherFetch,json,currentWeather;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"v1/places/\".concat(city,\"/forecasts/long-term\"),{signal:myAbortController.signal});case 3:currentWeatherFetch=_context.sent;_context.next=6;return currentWeatherFetch.json();case 6:json=_context.sent;currentWeather=json.forecastTimestamps.filter(function(timeUtc){return timeUtc.forecastTimeUtc;});setWeather(currentWeather[0].airTemperature);_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);if(myAbortController.signal.aborted){_context.next=16;break;}return _context.abrupt(\"return\",{error:_context.t0.message});case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}))();return function(){myAbortController.abort();};},[city]);return weather;};export var useCity=function useCity(){var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),city=_useState4[0],setCity=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];useEffect(function(){fetch(\"/v1/places\").then(function(response){if(!response.ok){throw new Error(\"This is an error: The status is \".concat(response.status));}var respond=response.json();return respond;}).then(function(actualData){setCity(actualData);}).catch(function(error){if(error){console.log(\"There is a problem fetching the post data - \".concat(error));}setError(error.message);setCity(null);}).finally(function(loading){// console.log('A moment please...');\nsetLoading(false);});},[]);return city;};","map":{"version":3,"names":["useState","useEffect","useTemperature","city","weather","setWeather","myAbortController","AbortController","fetch","signal","currentWeatherFetch","json","currentWeather","forecastTimestamps","filter","timeUtc","forecastTimeUtc","airTemperature","console","log","aborted","error","message","abort","useCity","setCity","loading","setLoading","setError","then","response","ok","Error","status","respond","actualData","catch","finally"],"sources":["C:/Users/CodeAcademy/Desktop/My Projects/app-universe/src/Hooks.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nexport const useTemperature = (city) => {\r\n  const [weather, setWeather] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!city) {\r\n      return;\r\n    }\r\n    const myAbortController = new AbortController();\r\n\r\n    (async () => {\r\n      try {\r\n        const currentWeatherFetch = await fetch(`v1/places/${city}/forecasts/long-term`, {\r\n          signal: myAbortController.signal,\r\n        });\r\n        const json = await currentWeatherFetch.json();\r\n        const currentWeather = json.forecastTimestamps.filter((timeUtc) => {\r\n          return timeUtc.forecastTimeUtc;\r\n        });\r\n        setWeather(currentWeather[0].airTemperature);\r\n      } catch (e) {\r\n        console.log(e);\r\n        if (!myAbortController.signal.aborted) {\r\n          return { error: e.message };\r\n        }\r\n      }\r\n    })();\r\n    return () => {\r\n      myAbortController.abort();\r\n    };\r\n  }, [city]);\r\n\r\n  return weather;\r\n};\r\n\r\nexport const useCity = () => {\r\n  const [city, setCity] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(`/v1/places`)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(`This is an error: The status is ${response.status}`);\r\n        }\r\n        const respond = response.json();\r\n        return respond;\r\n      })\r\n      .then((actualData) => {\r\n        setCity(actualData);\r\n      })\r\n      .catch((error) => {\r\n        if (error) {\r\n          console.log(`There is a problem fetching the post data - ${error}`);\r\n        }\r\n        setError(error.message);\r\n        setCity(null);\r\n      })\r\n      .finally((loading) => {\r\n        // console.log('A moment please...');\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n  return city;\r\n};\r\n"],"mappings":"ibAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE3C,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAIC,IAAI,CAAK,CACtC,cAA8BH,QAAQ,CAAC,IAAI,CAAC,wCAArCI,OAAO,eAAEC,UAAU,eAE1BJ,SAAS,CAAC,UAAM,CACd,GAAI,CAACE,IAAI,CAAE,CACT,OACF,CACA,GAAMG,kBAAiB,CAAG,GAAIC,gBAAe,EAAE,CAE/C,0DAAC,uNAEqCC,MAAK,qBAAcL,IAAI,yBAAwB,CAC/EM,MAAM,CAAEH,iBAAiB,CAACG,MAC5B,CAAC,CAAC,QAFIC,mBAAmB,qCAGNA,oBAAmB,CAACC,IAAI,EAAE,QAAvCA,IAAI,eACJC,cAAc,CAAGD,IAAI,CAACE,kBAAkB,CAACC,MAAM,CAAC,SAACC,OAAO,CAAK,CACjE,MAAOA,QAAO,CAACC,eAAe,CAChC,CAAC,CAAC,CACFX,UAAU,CAACO,cAAc,CAAC,CAAC,CAAC,CAACK,cAAc,CAAC,CAAC,iFAE7CC,OAAO,CAACC,GAAG,aAAG,CAAC,GACVb,iBAAiB,CAACG,MAAM,CAACW,OAAO,0DAC5B,CAAEC,KAAK,CAAE,YAAEC,OAAQ,CAAC,uEAGhC,IAAG,CACJ,MAAO,WAAM,CACXhB,iBAAiB,CAACiB,KAAK,EAAE,CAC3B,CAAC,CACH,CAAC,CAAE,CAACpB,IAAI,CAAC,CAAC,CAEV,MAAOC,QAAO,CAChB,CAAC,CAED,MAAO,IAAMoB,QAAO,CAAG,QAAVA,QAAO,EAAS,CAC3B,eAAwBxB,QAAQ,CAAC,EAAE,CAAC,yCAA7BG,IAAI,eAAEsB,OAAO,eACpB,eAA8BzB,QAAQ,CAAC,IAAI,CAAC,yCAArC0B,OAAO,eAAEC,UAAU,eAC1B,eAA0B3B,QAAQ,CAAC,IAAI,CAAC,yCAAjCqB,KAAK,eAAEO,QAAQ,eAEtB3B,SAAS,CAAC,UAAM,CACdO,KAAK,cAAc,CAChBqB,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,GAAI,CAACA,QAAQ,CAACC,EAAE,CAAE,CAChB,KAAM,IAAIC,MAAK,2CAAoCF,QAAQ,CAACG,MAAM,EAAG,CACvE,CACA,GAAMC,QAAO,CAAGJ,QAAQ,CAACnB,IAAI,EAAE,CAC/B,MAAOuB,QAAO,CAChB,CAAC,CAAC,CACDL,IAAI,CAAC,SAACM,UAAU,CAAK,CACpBV,OAAO,CAACU,UAAU,CAAC,CACrB,CAAC,CAAC,CACDC,KAAK,CAAC,SAACf,KAAK,CAAK,CAChB,GAAIA,KAAK,CAAE,CACTH,OAAO,CAACC,GAAG,uDAAgDE,KAAK,EAAG,CACrE,CACAO,QAAQ,CAACP,KAAK,CAACC,OAAO,CAAC,CACvBG,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAAC,CACDY,OAAO,CAAC,SAACX,OAAO,CAAK,CACpB;AACAC,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CACN,MAAOxB,KAAI,CACb,CAAC"},"metadata":{},"sourceType":"module"}